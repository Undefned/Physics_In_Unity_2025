using UnityEngine;

// Класс системы электрического поля.
// Отвечает за расчёт результирующей напряжённости поля
// от всех зарядов в пространстве.
public class ElectricFieldSystem : MonoBehaviour
{
    // Массив всех источников электрического поля (зарядов).
    // Каждый элемент массива — объект с компонентом Charge.
    public Charge[] charges;

    // Метод возвращает вектор напряжённости электрического поля
    // в произвольной точке пространства.
    public Vector3 GetField(Vector3 point)
    {
        // Начальное значение результирующего поля равно нулю
        Vector3 E = Vector3.zero;

        // Проходим по всем зарядам в системе
        foreach (Charge c in charges)
        {
            // Складываем вклад напряжённости поля
            // от каждого отдельного заряда
            E += c.ElectricField(point);
        }

        // Возвращаем результирующее поле —
        // векторную сумму полей всех зарядов
        return E;
    }
}
